<!DOCTYPE html>
<html>
<head>
    <title>Test Token</title>
</head>
<body>
    <h1>Test API</h1>
    <button onclick="testLogin()">Login</button>
    <button onclick="testGetMe()">Get Me</button>
    <pre id="output"></pre>

    <script>
        let token = null;
        
        async function testLogin() {
            const response = await fetch('http://localhost:8092/auth/login', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    email: 'yazaonion@gmail.com',
                    password: 'your_password'
                })
            });
            const data = await response.json();
            console.log('Login response:', data);
            token = data.result?.access_token;
            localStorage.setItem('accessToken', token);
            document.getElementById('output').textContent = JSON.stringify(data, null, 2);
        }
        
        async function testGetMe() {
            token = localStorage.getItem('accessToken');
            console.log('Token from localStorage:', token);
            
            const response = await fetch('http://localhost:8092/users/me', {
                method: 'GET',
                headers: { 
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}`
                }
            });
            const data = await response.json();
            console.log('Get me response:', data);
            document.getElementById('output').textContent = JSON.stringify(data, null, 2);
        }
    </script>
</body>
</html>
